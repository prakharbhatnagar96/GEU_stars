COPY START 2000
FIRST STOREL RETADR
CLOOP JUMPSUBR RDREC
. LOADACC LENGTH
. COMPAR ZERO
. JUMPEQ ENDFIL
. JUMPSUBR WRREC
. JUMP CLOOP
ENDFIL LOADACC EOF
. STOREACC BUFFER
. LOADACC THREE
. STOREACC LENGTH
. JUMPSUBR WRREC
. LOADL RETADR
. RSUB
EOF BYTEC EOF
THREE WORD 3
ZERO WORD 0
RETADR RESW 1
LENGTH RESW 1
BUFFER RESB 4096
RDREC LOADINDEX ZERO
. LOADACC ZERO
RLOOP TESTDEV INPUT
. JUMPEQ RLOOP
. READDEV INPUT
. COMPAR ZERO
. JUMPEQ EXIT
. STORECHAR BUFFER
. TINDEX MAXLEN
. JUMPLESS RLOOP
EXIT STOREINDEX LENGTH
. RSUB
INPUT BYTEX F1
MAXLEN WORD 4096
WRREC LOADINDEX ZERO
WLOOP TESTDEV OUTPUT
. JUMPEQ WLOOP
. LOADCHAR BUFFER
. WRITEDEV OUTPUT
. TINDEX LENGTH
. JUMPLESS WLOOP
. RSUB
OUTPUT BYTEX 06
. END COPY
